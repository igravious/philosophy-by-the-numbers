<%= form_tag(specific_philosophers_url, method: :patch, class: 'form-inline', id: :specific_form) do %>
	<h1>a property list of <%= @property_list.size %> philosophical figures with a 
	<% @entity_ids.each do |entity_id| %>
		<%= hidden_field_tag "ids[]", entity_id %>
	<% end %>
	<span class="actions">
		<%= submit_tag @grouping, class: 'slim' %>
	</span>
 connection</h1>
<% end %>

<!-- #<Property id: 86, property_id: 27, entity_id: 41166, entity_label: "Jonathan Swift", data_id: 215530, data_label: "Kingdom of Ireland", created_at: "2021-05-06 11:39:03", updated_at: "2021-05-06 11:39:03"> -->

<table>
  <thead>
		<tr>
			<th>Property Id</th>
			<th>Property Label</th>
			<th>Entity Id</th>
			<th>Entity Label</th>
			<th>(Original Id)</th>
      <th>Data Id</th>
      <th>Data Label</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
		<%
			instance_labels = {}
			@property_list.each do |property| #  Rails.logger.info property.inspect
				instance_label = if instance_labels.has_key?(property.data_id)
													 instance_labels[property.data_id]
												 else
													 instance_labels[property.data_id] = P::P31.one_long_label(property.data_id)
												 end

		%>
			<tr>
        <td><%= ('P'==property.type[3])?wikidata_property_url(property.property_id):property.type %></td>
				<td><%= property.class.english_label %><%# @property_names[property.property_id] %></td>
        <td><%= wikidata_entity_url(property.entity_id) %></td>
				<td><%= property.entity_label %></td>
        <td><%= wikidata_entity_url(property.original_id) %></td>
        <td><%= wikidata_entity_url(property.data_id) %></td>
				<td title="<%= instance_label %>"><%= property.data_label %></td>
        <td><%# link_to 'Show', property %></td>
        <td><%# link_to 'Edit', edit_property_path(property) %></td>
        <td><%# link_to 'Destroy', property, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

