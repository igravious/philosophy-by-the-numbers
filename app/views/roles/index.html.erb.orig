<<<<<<< HEAD
=======
<p id="notice"><%= notice %></p>

<%=
	Shadow.none # prep!
	@listing = if 0 == @mode
		'<h1>Listing '+@info+'</h1>'
	elsif 1 == @mode
		'<h1>Listing Roles for '+@info+'</h1>'
	elsif 2 == @mode
		'<h1>Listing Roles for Entity '+wikidata_entity_url(@info)+'</h1>'
	end
	@listing.html_safe
%>

>>>>>>> e3b06b4 (Super big commit, but the whole app needs rewriting :()
<table>
  <thead>
    <tr>
			<%=
				@figure = if (0 == @mode or 2 == @mode)
					"<th>Philosophical Figure</th>" 
				else
					""
				end
				@figure.html_safe
			%>
      <th>Entity Label</th>
      <th>Entity</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
		<%
			rel = 0
			@roles.each do |role|
		%>
			<tr>
				<%=
					@figure = if (0 == @mode or 2 == @mode)
						"<td>#{link_to Philosopher.find(role.shadow_id).english, philosophers_path(shadow_id: role.shadow_id)}</td>"
					else
						rel +=1 if Capacity.find_by(entity_id: role.entity_id).relevant
						""
					end
					@figure.html_safe
				%>
        <td><%= role.label %></td>
				<td><%= link_to role.entity_id, roles_path({filter: :entity_id, value: role.entity_id}) %></td>
        <td><%= link_to 'Show', role %></td>
        <td><%= link_to 'Edit', edit_role_path(role) %></td>
        <td><%= link_to 'Destroy', role, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @roles %> <%= page_entries_info @roles %>

<% if 1 == @mode %>
	<div><%= "#{rel}/#{@roles.size} relevant roles."%></div>
<% end %>

<% if 1 == @mode %>
	<div><%= "#{rel}/#{@roles.size} relevant roles."%></div>
<% end %>

<br>

<%= link_to 'New Role', new_role_path %> | <%= link_to 'All Capacities', roles_path(filter: :capacity) %>
