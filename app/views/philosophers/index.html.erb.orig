
<%= (link_to 'Specific Philosopher', specific_philosophers_url({ids: [@entity_qid[1..-1]]})) unless @entity_qid.nil? %>

<%= form_tag(@whereami, method: :patch, id: :filter_form) do %>
<%= hidden_field_tag 'type', @type %>
<%= hidden_field_tag 'hide', @hide %>
<%= hidden_field_tag 'sort', sort_column %>
<%= hidden_field_tag 'direction', sort_direction %>
<!-- https://www.google.com/search?q=ruby+map+shorthand -->
<% unless @ids.nil? %>
	<% @ids.each do |id| %>
		<%= hidden_field_tag "ids[]", id %>
	<% end %>
<% end %>
<% if 'yes' != @hide %>
<table>
	<thead>
		<tr>
			<th>Filter …</th>
			<th>by <%= link_to 'Language', 'https://www.wikidata.org/wiki/Property:P424' %> <i>and</i> Type</th>
			<th>by ID / Entity ID <i>or</i> Label</th>
			<th>by Gender <i>or</i> Ref</th>
			<th>Date related</th>
			<th>by Metric or VIAF</th>
		</tr>
	</thead>
	
	<tbody>
		<tr>
			<td>
				<%= render 'save_changes' %>
				<%= render 'reset' %>
<<<<<<< HEAD
				<%# render 'hide' %>
			</td>
			<td><%= render 'language_filter' %><p><%= render 'meta_filter' %><%# render 'type_filter' %></p></td>
			<td style="width: 300px"><%= render 'an_id_filter' %><p><%= render 'label_filter' %></p></td>
			<td><%= render 'gender_filter' %><%= render 'only_ticked_filter' %><%= render 'all_ticked_filter' %></td>
=======
			</td>
			<td><%= render 'language_filter' %><%= render 'type_filter' %></td>
			<td style="width: 300px"><%= render 'an_id_filter' %><%= render 'label_filter' %></td>
			<td><%= render 'only_ticked_filter' %><%= render 'all_ticked_filter' %><%= render 'gender_filter' %></td>
>>>>>>> e3b06b4 (Super big commit, but the whole app needs rewriting :()
			<td><%= render 'date_filter' %></td>
			<td><%= render 'viaf_filter' %><%= render 'metric_filter' %></td>
		</tr>
	</tbody>
</table>
<% else %>
	<%= render 'unhide' %>
<% end %>

<table>
  <thead>
    <tr>
			<th><%= sortable 'id', 'ID', p_extra %><%# 'ID' %></th>
			<th><%= sortable 'entity_id', 'Entity', p_extra %></th>
			<th><%= sortable 'label', 'Label', p_extra %></th>
			<th><%= sortable 'birth_year', 'Born', p_extra %></th>
			<th><%= sortable 'death_year', 'Died', p_extra %></th>
			<!--th><%# 'Roles' %></th-->
			<th>Works</th>
			<th><%= sortable 'linkcount', 'LC', p_extra %></th>
			<th><%= sortable 'mention', 'M', p_extra %></th>
			<!--th><%# sortable 'dbpedia_pagerank', 'R', p_extra %></th-->
			<th><%= sortable 'danker', 'PageRank', p_extra %></th>
			<!--th><%# sortable 'metric', 'Metric', p_extra %></th-->
			<th><%= sortable 'measure', 'Measure', p_extra %></th>
			<!-- -->
			<th title='Thikners from InPhO'                  style='padding-right: 0.6em'><%= toggleable 'inpho',     'I', p_extra %></th>
			<th title='Macmillan Reference USA
The Encyclopedia of Philosophy, 2nd Edition'           style='padding-right: 0.6em'><%= toggleable 'borchert',  'M', p_extra %></th>
			<th title='Internet Encyclopedia of Philosophy'  style='padding-right: 0.6em'><%= toggleable 'internet',  'I', p_extra %></th>
			<!-- -->
			<th title='Cambridge Dictionary of Philosophy'   style='padding-right: 0.6em'><%= toggleable 'cambridge', 'C', p_extra %></th>
			<th title='Garth Kemerling
A Dictionary of Philosophical Terms and Names'         style='padding-right: 0.6em'><%= toggleable 'kemerling', 'K', p_extra %></th>
			<th title='Philosophers from Wikidata'           style='padding-right: 0.6em'><%= toggleable 'populate',  'W', p_extra %></th>
			<th title='Oxford Dictionary of Philosophy'      style='padding-right: 0.6em'><%= toggleable 'oxford',    'O', p_extra %></th>
			<th title='Routledge Encyclopedia of Philosophy' style='padding-right: 0.6em'><%= toggleable 'routledge', 'R', p_extra %></th>
			<th title='Philosophers from DBpedia'            style='padding-right: 0.6em'><%= toggleable 'dbpedia',   'D', p_extra %></th>
			<th title='Stanford Encyclopedia of Philosophy'  style='padding-right: 0.6em'><%= toggleable 'stanford',  'S', p_extra %></th>
			<th>Position</th>
			<!--
			<th colspan="3"></th>
			-->
    </tr>
  </thead>

<% end %>

<<<<<<< HEAD
	<tbody>
		<!-- TODO https://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections -->
		<%= render @shadows %>
  </tbody>
</table>

<%= paginate @shadows %> <%= page_entries_info @shadows, entry_name: 'philosophical figure' %> <span>– <b><%= @max %></b> without filters.</span>
<%= link_to 'List Philosophical Works', works_path %> 

<%= render 'look_up_info' %>
=======
  <tbody>
		<%
			@shadows.each do |shadow|
				w_label, w_lang, en_label, label = shadow.show_label(@lang, @entity_id.nil?)
				ready_works_count = ::Text.where(id: Writing.where(author_id: Author.where(english_name: en_label)).pluck(:text_id)).count
				link_to_ready_works = link_to ready_works_count, texts_url(author_name: en_label), method: :patch
				link_to_all_works = link_to shadow.works.count, philosopher_works_url(shadow.id, lang: @lang)
		%>
      <tr>
				<td><%= link_to shadow.id, roles_path({filter: 'shadow_id', value: shadow.id}) %></td>
        <td><%= wikidata_entity_url(shadow.entity_id) %></td>
				<td><%= label.nil? ? '…' : wikipedia_entity_url(w_label, w_lang, label) %></td>
        <td style="font-style: oblique"><%= shadow.birth_year %></td>
        <td style="font-style: oblique"><%= shadow.death_year %></td>
				<!--td style="float: right"><%# @rel_size[shadow.id].nil? ? 0 : link_to(sprintf("%d", @rel_size[shadow.id]-1),roles_path({filter: :shadow_id, value: shadow.id})) %></td-->
				<td><%= link_to_ready_works %>/<%= link_to_all_works %></td>
				<td><%= shadow.linkcount %></td>
        <td><%= shadow.mention %></td>
				<!-- td style="float: right"><%# sprintf("%.3f",shadow.dbpedia_pagerank.nil? ? 0.0 : shadow.dbpedia_pagerank) %></td -->
				<td style="float: right"><%= sprintf("%.3f",shadow.danker.nil? ? 0.0 : shadow.danker) %></td>
        <!-- td style="float: right"><%# sprintf("%d", shadow.metric.to_i) %></td-->
        <td><%= sprintf("%d", shadow.measure.to_i) %></td>
				<!-- -->
				<td style='padding-right: 0.6em'><%= shadow.inphobool ? '✓' : '' %></td>
				<td style='padding-right: 0.6em'><%= shadow.borchert  ? '✓' : '' %></td>
				<td style='padding-right: 0.6em'><%= shadow.internet  ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.cambridge ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.kemerling ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.populate  ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.oxford    ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.routledge ? '✓' : '' %></td>
				<td style='padding-right: 0.6em'><%= shadow.dbpedia   ? '✓' : '' %></td>
        <td style='padding-right: 0.6em'><%= shadow.stanford  ? '✓' : '' %></td>
				<td title="<%= shadow.metric_pos %>" style="float: right"><%= shadow.measure_pos %></td>
				<!--td style="float: right"><%# shadow.metric_pos %></td-->
				<!--
        <td><%# link_to 'Show', shadow %></td>
        <td><%# link_to 'Edit', edit_philosopher_path(shadow) %></td>
				<td><%# link_to 'Destroy', shadow, method: :delete, data: { confirm: 'Are you sure?' } %></td>
				-->
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @shadows %> <%= page_entries_info @shadows, entry_name: 'philosophical figures' %>
>>>>>>> e3b06b4 (Super big commit, but the whole app needs rewriting :()

<%# link_to 'New Philosopher', new_philosopher_path %>
